<!doctype html>
<html>
  <head>
    <title>JSON to FileSystem and Back Again</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script> 
    <script type="text/javascript" src="https://raw.github.com/padolsey/prettyPrint.js/master/prettyprint.js"></script>
    <script type="text/javascript" src="giftwrap.js"></script>
    <script type="text/javascript">
      var jsonObject = {
        letters: ["a", "b", "c", "d", "e", "f", "g"],
        numbers: {
          integer: 1235,
          decimal: 50.4
        }
      };
      $(document).ready(function() {
        $(".existing-json").html(prettyPrint(jsonObject));
        new GW.Present({persistent: true, onReady: function(jsonIo) {
          jsonIo.writeObject(jsonObject, function () {
            console.log("0");
            jsonIo.readObject(function() {
              $(".read-json").html(prettyPrint(jsonIo.getObject()));
              });
            });
          jsonIo.writeObject({a: [1,2,3,4]}, function() { console.log("1"); });
          jsonIo.writeObject({a: [2,3,4,5]}, function() { console.log("2"); });
          jsonIo.writeObject({a: [3,4,5,6]}, function() { console.log("3"); });
          jsonIo.writeObject({a: [4,5,6,7]}, function() { console.log("4"); });
          jsonIo.writeObject({a: [5,6,7,8]}, function() { console.log("5"); });
        }});
      });
    </script>
  </head>
  <body>
    <h1>FileSystem to JSON example usage</h1>
    <h2>Object to be written to filesystem</h2>
    <div class="existing-json"></div>
    <h2>Object read from filesystem</h2>
    <div class="read-json"></div>
  </body>
</html>
